---
const collections = [
  { 
    id: 1, 
    name: 'Spring Collection', 
    year: '2024',
    items: '24 pieces',
    desc: 'Lightweight fabrics meet traditional silhouettes'
  },
  { 
    id: 2, 
    name: 'Urban Essentials', 
    year: '2024',
    items: '18 pieces',
    desc: 'Modern streetwear with Japanese minimalism'
  },
  { 
    id: 3, 
    name: 'Heritage Line', 
    year: '2024',
    items: '32 pieces',
    desc: 'Timeless pieces inspired by ancient craftsmanship'
  },
];

const featured = [
  { id: 1, name: 'Oversized Haori Jacket', price: '¥28,500', category: '羽織' },
  { id: 2, name: 'Minimalist Kimono Robe', price: '¥32,000', category: '着物' },
  { id: 3, name: 'Wide Hakama Trousers', price: '¥24,800', category: 'パンツ' },
  { id: 4, name: 'Noragi Work Jacket', price: '¥26,500', category: '野良着' },
];
---

<!-- Collections Section -->
<section class="py-32 bg-black relative" data-scroll-section id="collection">
  <div class="container mx-auto px-6 lg:px-12">
    <div class="max-w-7xl mx-auto">
      <div class="text-center mb-20" data-scroll data-scroll-speed="1">
        <p class="text-xs tracking-[0.3em] uppercase text-zinc-500 mb-4">Latest Collections</p>
        <h2 class="text-5xl md:text-7xl lg:text-8xl font-black leading-tight jp-text mb-6">
          四季折々
        </h2>
        <p class="text-lg md:text-xl text-zinc-400 mt-6 max-w-2xl mx-auto mb-8">
          Each collection tells a story of transformation, inspired by the changing seasons and timeless Japanese philosophy.
        </p>
        
        <!-- LINK KE SHOWCASE PAGE -->
        <a 
          href="/showcase" 
          class="inline-flex items-center gap-3 text-sm tracking-[0.2em] uppercase border border-zinc-800 px-8 py-4 hover:border-white hover:bg-white/5 transition-all group"
        >
          View All Collections
          <i class="ph ph-arrow-right group-hover:translate-x-1 transition-transform"></i>
        </a>
      </div>

      <div class="space-y-1">
        {collections.map((collection, index) => (
          <a 
            href="/showcase"
            class="collection-item group cursor-pointer border-t border-zinc-800 hover:border-zinc-600 transition-colors block"
            data-scroll
            data-scroll-speed={0.5 + index * 0.1}
          >
            <div class="py-8 md:py-12 grid grid-cols-12 gap-6 items-center">
              <div class="col-span-1 text-xs text-zinc-600">
                {String(index + 1).padStart(2, '0')}
              </div>
              
              <div class="col-span-11 md:col-span-5 lg:col-span-6">
                <h3 class="text-2xl md:text-4xl lg:text-5xl font-bold group-hover:translate-x-4 transition-transform duration-500">
                  {collection.name}
                </h3>
              </div>

              <div class="hidden md:block col-span-3 lg:col-span-2">
                <p class="text-sm text-zinc-500">{collection.items}</p>
              </div>

              <div class="hidden md:block col-span-2">
                <p class="text-xs text-zinc-600">{collection.year}</p>
              </div>

              <div class="hidden lg:block col-span-1 text-right">
                <i class="ph ph-arrow-right text-xl opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all duration-500"></i>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  </div>
</section>

<!-- Featured Products -->
<section class="py-32 bg-zinc-950 relative overflow-hidden" data-scroll-section>
  <div class="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-zinc-900/50 to-transparent"></div>
  
  <div class="container mx-auto px-6 lg:px-12">
    <div class="max-w-7xl mx-auto">
      <div class="mb-16" data-scroll data-scroll-speed="1">
        <p class="text-xs tracking-[0.3em] uppercase text-zinc-500 mb-4">Featured</p>
        <h2 class="text-4xl md:text-6xl lg:text-7xl font-black">Essential Pieces</h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
        {featured.map((product, index) => (
          <div 
            class="product-card group cursor-pointer"
            data-scroll
            data-scroll-speed={0.3 + (index % 2) * 0.2}
          >
            <div class="relative aspect-[3/4] bg-zinc-900 mb-6 overflow-hidden">
              <div class="absolute inset-0 bg-gradient-to-br from-zinc-800 via-zinc-900 to-black transform group-hover:scale-105 transition-transform duration-700"></div>
              
              <!-- Hover Overlay -->
              <div class="absolute inset-0 bg-white/0 group-hover:bg-white/5 transition-colors duration-500"></div>
              
              <!-- Category -->
              <div class="absolute inset-0 flex items-center justify-center text-8xl jp-text text-white/5 group-hover:text-white/10 transition-colors duration-500">
                {product.category}
              </div>

              <!-- Quick View -->
              <div class="absolute bottom-0 left-0 right-0 p-6 translate-y-full group-hover:translate-y-0 transition-transform duration-500">
                <button class="w-full py-3 text-xs tracking-[0.2em] uppercase border border-white/30 hover:bg-white/10 transition-colors">
                  Quick View
                </button>
              </div>
            </div>

            <div class="space-y-2">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="text-lg md:text-xl font-medium mb-1 group-hover:translate-x-2 transition-transform duration-300">
                    {product.name}
                  </h3>
                  <p class="text-sm text-zinc-500 jp-text">{product.category}</p>
                </div>
                <p class="text-sm font-light">{product.price}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<!-- Philosophy Section -->
<section class="py-32 bg-black relative" data-scroll-section id="about">
  <div class="container mx-auto px-6 lg:px-12">
    <div class="max-w-4xl mx-auto text-center">
      <div data-scroll data-scroll-speed="2">
        <p class="text-xs tracking-[0.3em] uppercase text-zinc-500 mb-8">Our Philosophy</p>
        <h2 class="text-5xl md:text-6xl lg:text-7xl font-black mb-12 jp-text leading-tight">
          不完全の美
        </h2>
        <p class="text-lg md:text-xl text-zinc-300 leading-relaxed mb-8">
          Wabi-sabi teaches us that nothing lasts, nothing is finished, and nothing is perfect. Our garments embrace this philosophy, celebrating natural materials, honest construction, and the beauty that emerges through use and time.
        </p>
        <p class="text-base text-zinc-400 leading-relaxed">
          Each piece is designed to age gracefully, developing character and telling your unique story. We reject fast fashion in favor of timeless design that honors both tradition and innovation.
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  import gsap from 'gsap';

  // Simplified hover effects - no ScrollTrigger conflicts
  window.addEventListener('load', () => {
    const collectionItems = document.querySelectorAll('.collection-item');
    
    collectionItems.forEach((item) => {
      const bg = document.createElement('div');
      bg.className = 'absolute inset-0 bg-zinc-900/20 scale-x-0 origin-left pointer-events-none';
      item.style.position = 'relative';
      item.appendChild(bg);

      item.addEventListener('mouseenter', () => {
        gsap.to(bg, {
          scaleX: 1,
          duration: 0.4,
          ease: 'power2.out'
        });
      });

      item.addEventListener('mouseleave', () => {
        gsap.to(bg, {
          scaleX: 0,
          duration: 0.4,
          ease: 'power2.in'
        });
      });
    });

    // Quick View Modal functionality
    const quickViewBtns = document.querySelectorAll('.quick-view-btn');
    
    quickViewBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const productData = JSON.parse(btn.getAttribute('data-product') || '{}');
        
        if (window.openProductModal) {
          window.openProductModal(productData);
        }
      });
    });
  });
</script>